---
// This component manages SEO meta tags, Open Graph, and Twitter cards.
// It should be placed in the <head> of your document.

export interface Props {
  title: string;
  description?: string;
  canonicalURL?: string; // Optional: for canonicalizing URLs
  ogTitle?: string;
  ogDescription?: string;
  ogImage?: string; // Full URL to image
  ogImageType?: string; // e.g., 'image/jpeg', 'image/png'
  ogImageAlt?: string;
  twitterCard?: 'summary' | 'summary_large_image' | 'app' | 'player';
  twitterSite?: string; // e.g., @ckbfirm
  twitterCreator?: string; // e.g., @authorname
  noIndex?: boolean; // Set to true to prevent indexing
}

const {
  title,
  description = 'The CKB Firm provides sophisticated, strategic legal counsel in commercial litigation, creditors\' rights, and real estate, empowering Chicago\'s businesses to mitigate risk, seize opportunities, and build a resilient foundation for enduring success.',
  canonicalURL = Astro.url.href,
  ogTitle = title,
  ogDescription = description,
  ogImage = 'https://firebasestorage.googleapis.com/v0/b/ckbfirmcom-test2.appspot.com/o/ckb-firm-og-default.jpg?alt=media&token=YOUR_FIREBASE_STORAGE_TOKEN_HERE', // This URL should be replaced with a real, accessible default OG image from Firebase Storage.
  ogImageType = 'image/jpeg',
  ogImageAlt = 'The CKB Firm logo with Chicago skyline background, representing strategic legal partnership.',
  twitterCard = 'summary_large_image',
  twitterSite = '@CKBFirm', // Placeholder, update with actual Twitter handle if available.
  twitterCreator,
  noIndex = false,
} = Astro.props;

// Ensure ogImage is a full URL, fallback to a generic placeholder if not provided or invalid
// In a production environment, 'YOUR_FIREBASE_STORAGE_TOKEN_HERE' must be replaced with a valid token,
// and 'ckb-firm-og-default.jpg' must exist in your Firebase Storage.
const finalOgImage = ogImage.startsWith('http') ? ogImage : 'https://firebasestorage.googleapis.com/v0/b/ckbfirmcom-test2.appspot.com/o/ckb-firm-og-default.jpg?alt=media&token=YOUR_FIREBASE_STORAGE_TOKEN_HERE';
---

<title>{title}</title>
<meta name="description" content={description} />
<link rel="canonical" href={canonicalURL} />

{noIndex && <meta name="robots" content="noindex, nofollow" />}
{!noIndex && <meta name="robots" content="index, follow" />}

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website" />
<meta property="og:url" content={canonicalURL} />
<meta property="og:title" content={ogTitle} />
<meta property="og:description" content={ogDescription} />
<meta property="og:image" content={finalOgImage} />
<meta property="og:image:type" content={ogImageType} />
<meta property="og:image:alt" content={ogImageAlt} />

<!-- Twitter -->
<meta property="twitter:card" content={twitterCard} />
<meta property="twitter:url" content={canonicalURL} />
<meta property="twitter:title" content={ogTitle} />
<meta property="twitter:description" content={ogDescription} />
<meta property="twitter:image" content={finalOgImage} />
{twitterSite && <meta property="twitter:site" content={twitterSite} />}
{twitterCreator && <meta property="twitter:creator" content={twitterCreator} />}